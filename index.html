<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–¢–∞–Ω—ã –ë–∏–∑–Ω–µ—Å –ó—É—Ä—Ö–∞–π</title>
  <link rel="stylesheet" href="style.css?v=1.1">
</head>
<body>
  <div class="container">
    <h1 class="title" id="text-section">üéâ –¢”®–†–°”®–ù ”®–î–†”®”® –û–†–£–£–õ–ê–ù–ê –£–£?</h1>

    <div id="input-section">
      <input type="date" id="birthday" required class="input-date">
      <button onclick="showQuote()" class="btn">OK</button>
    </div>

    <div id="quote-section" class="quote-box hidden">
      <h2 class="quote-title">üåü –¢–∞–Ω—ã –ë–∏–∑–Ω–µ—Å –ó—É—Ä—Ö–∞–π:</h2>
      <p id="quote" class="quote-text"></p>
    </div>
  </div>

  <script>
  window.onload = function () {
    if (localStorage.getItem("seenQuote") === "true") {
      document.getElementById("input-section").style.display = "none";
      document.getElementById("quote-section").classList.remove("hidden");
      document.getElementById("quote").textContent = localStorage.getItem("quoteText");
    }
  };

  function showQuote() {
    const birthdayInput = document.getElementById("birthday").value;
    if (!birthdayInput) {
      alert("–¢”©—Ä—Å”©–Ω ”©–¥—Ä”©”© –æ—Ä—É—É–ª–Ω–∞ —É—É!");
      return;
    }

    const minDate = new Date("1955-01-01");
    const maxDate = new Date("2023-01-01");
    const selectedDate = new Date(birthdayInput);
    if (selectedDate < minDate || selectedDate > maxDate) {
      alert("–¢”©—Ä—Å”©–Ω ”©–¥”©—Ä 1955-01-01 –±–∞ 2023-01-01 —Ö–æ–æ—Ä–æ–Ω–¥ –±–∞–π—Ö —ë—Å—Ç–æ–π!");
      return;
    }

    document.getElementById("input-section").style.display = "none";

    fetch("quotes.json")
      .then((res) => res.json())
      .then((data) => {
        const randomIndex = Math.floor(Math.random() * data.length);
        const selectedQuote = data[randomIndex];

        document.getElementById("quote").textContent = selectedQuote;
        document.getElementById("quote-section").classList.remove("hidden");

        // localStorage-–¥ —Ö–∞–¥–≥–∞–ª–∞—Ö
        localStorage.setItem("seenQuote", "true");
        localStorage.setItem("quoteText", selectedQuote);
      });
  }
</script>

</body>
</html>
